<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Task Tool</title>

<meta name="theme-color" content="#3b2f2f">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">

<style>
* { box-sizing: border-box; }

body {
  margin: 0;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
  background: #3b2f2f;
  color: #fff;
  display: flex;
  flex-direction: column;
  align-items: center;
}

#taskInput, #tagsInput {
  width: 92%;
  max-width: 480px;
  padding: 18px;
  font-size: 18px;
  border: none;
  border-radius: 14px;
  margin-top: 14px;
  outline: none;
  background: #bbf7d0;
  color: #3b2f2f;
  box-shadow: 0 2px 6px rgba(0,0,0,0.15);
  font-family: inherit;
}

#taskInput:focus, #tagsInput:focus {
  outline: 2px solid #22c55e;
  outline-offset: 2px;
}

#charCount {
  width: 92%;
  max-width: 480px;
  text-align: right;
  font-size: 12px;
  color: #ddd;
  margin-top: 4px;
  margin-bottom: 6px;
}

.toolbar {
  width: 92%;
  max-width: 480px;
  display: flex;
  gap: 10px;
  margin: 10px 0 6px;
}

.toolbar button {
  flex: 1;
  padding: 8px 0;
  font-size: 14px;
  font-weight: 600;
  border: none;
  border-radius: 10px;
  background: #4a3838;
  color: #fff;
}

.toolbar button.active { background: #2563eb; }

#taskList {
  width: 92%;
  max-width: 480px;
  margin-top: 14px;
}

.task-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 14px;
  border-radius: 14px;
  background: #bbf7d0;
  color: #3b2f2f;
  margin-bottom: 10px;
  font-size: 16px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.15);
}

.task-item.completed span {
  text-decoration: line-through;
  opacity: 0.6;
}

.task-item .deleteBtn {
  margin-left: auto;
  border: none;
  background: #4a3838;
  color: #fff;
  border-radius: 50%;
  width: 36px;
  height: 36px;
  font-size: 16px;
  display: flex;
  justify-content: center;
  align-items: center;
}
</style>
</head>
<body>

<input type="text" id="taskInput" placeholder="Task descriptionâ€¦" maxlength="160">
<input type="text" id="tagsInput" placeholder="Tags (comma separated)">

<div id="charCount">160</div>

<div class="toolbar">
  <button id="addTaskBtn">âž• Add</button>
  <button id="clearTasksBtn">ðŸ—‘ Clear All</button>
</div>

<div id="taskList"></div>

<script>
const taskInput = document.getElementById('taskInput');
const tagsInput = document.getElementById('tagsInput');
const charCount = document.getElementById('charCount');
const addTaskBtn = document.getElementById('addTaskBtn');
const clearTasksBtn = document.getElementById('clearTasksBtn');
const taskList = document.getElementById('taskList');

let tasks = JSON.parse(localStorage.getItem('tasks') || '[]');

function saveTasks() {
  localStorage.setItem('tasks', JSON.stringify(tasks));
}

function createTask(text, tags) {
  return {
    id: Date.now(),
    text: text.trim(),
    completed: false,
    tags: tags,
    createdAt: Date.now()
  };
}

function renderTasks() {
  taskList.innerHTML = '';
  tasks.forEach(task => {
    const div = document.createElement('div');
    div.className = 'task-item';
    if(task.completed) div.classList.add('completed');

    const checkbox = document.createElement('input');
    checkbox.type = 'checkbox';
    checkbox.checked = task.completed;
    checkbox.onclick = () => {
      task.completed = !task.completed;
      saveTasks();
      renderTasks();
    };

    const span = document.createElement('span');
    const tagText = task.tags.map(t => `#${t}`).join(' ');
    span.textContent = `${task.text}${tagText ? ' ' + tagText : ''}`;

    const delBtn = document.createElement('button');
    delBtn.className = 'deleteBtn';
    delBtn.textContent = 'Ã—';
    delBtn.onclick = () => {
      tasks = tasks.filter(t => t.id !== task.id);
      saveTasks();
      renderTasks();
    };

    div.appendChild(checkbox);
    div.appendChild(span);
    div.appendChild(delBtn);
    taskList.appendChild(div);
  });
}

function addTask() {
  const text = taskInput.value.trim();
  if(!text) return;

  const tags = tagsInput.value.split(',').map(t => t.trim()).filter(t => t);
  const newTask = createTask(text, tags);
  tasks.unshift(newTask);

  saveTasks();
  renderTasks();

  taskInput.value = '';
  tagsInput.value = '';
  updateCharCount();
  taskInput.focus();
}

addTaskBtn.onclick = addTask;
clearTasksBtn.onclick = () => {
  if(confirm("Clear all tasks?")) {
    tasks = [];
    saveTasks();
    renderTasks();
  }
};

taskInput.addEventListener('keydown', e => {
  if(e.key === 'Enter') addTask();
});

taskInput.addEventListener('input', updateCharCount);
function updateCharCount() {
  charCount.textContent = 160 - taskInput.value.length;
}

renderTasks();
</script>

</body>
</html>
